# 智能评语系统 - 提示词配置使用文档

## 📋 概述

本系统支持动态提示词配置，您可以直接修改 `public/prompts.json` 文件来调整评语生成的模板，**无需重新打包**应用程序。

## 📁 文件位置

配置文件路径：
```
Intelligent Comment System/public/prompts.json
```

## 🔧 修改方法

### 方法一：直接编辑 JSON 文件

1. 使用文本编辑器打开 `public/prompts.json`
2. 根据需要修改对应的提示词模板
3. 保存文件
4. **刷新浏览器**即可生效（无需重新打包）

### 方法二：使用代码编辑器（推荐）

推荐使用 VS Code 或 Sublime Text 等代码编辑器，支持语法高亮和格式化。

## 📊 配置文件结构

### 元数据

```json
{
  "metadata": {
    "version": "2.0.1",
    "lastUpdated": "2026-01-21",
    "description": "智能评语系统提示词配置文件 - 优化版（修复JSON转义）",
    "variables": {
      "name": "学生姓名",
      "tags": "学生标签（自动用顿号连接）",
      "gender": "他/她"
    }
  },
  "kindergarten": [...],
  "primary": [...],
  "middle": [...],
  "default": {...}
}
```

### 2. 学段配置

系统支持三个学段：
- **kindergarten** - 幼儿园阶段
- **primary** - 小学阶段  
- **middle** - 初中阶段

每个学段包含 3 种评语风格，每个风格包含以下字段：

```json
{
  "style": "dragon-horse",       // 风格ID（不可修改）
  "name": "龙马精神",             // 风格名称（可修改）
  "description": "引用'一马当先'、'龙马精神'等成语", // 风格描述（可修改）
  "template": "{name}是一个{tags}的学生..." // 评语模板（可修改）
}
```

### 3. 支持的变量

模板中支持以下变量：

- **{name}** - 学生姓名
- **{tags}** - 学生标签（自动用顿号连接）
- **{gender}** - 性别代词（他/她）

**示例**：
```json
"template": "{name}是一个{tags}的学生。{gender}在学习和生活中都有不错的表现。"
```

**渲染后**：
```
张三是一个活泼、善良、好学的学生。他在学习和生活中都有不错的表现。
```

## 🎯 详细配置示例

### 1. 幼儿园阶段配置

```json
"kindergarten": [
  {
    "style": "lively-horse",
    "name": "活泼小马",
    "description": "结合2026马年元素，把孩子比作可爱的'小马驹'，活泼充满童趣。",
    "template": "{name}是一个{tags}的孩子，就像一匹活泼可爱的小马驹。{gender}在幼儿园里总是充满活力，和小伙伴们相处得很愉快。希望{name}继续保持这份活力，快乐成长！"
  },
  {
    "style": "warm-gentle",
    "name": "亲切温柔",
    "description": "像妈妈一样的口吻，语气柔和，充满爱意和包容。",
    "template": "亲爱的{name}，你是一个{tags}的宝贝。老师看到{gender}每天都在进步，心里特别开心。{name}，你真棒！继续加油哦！"
  },
  {
    "style": "detail-narrative",
    "name": "细节叙事",
    "description": "侧重描述生活细节和具体画面，不会空洞地表扬。",
    "template": "{name}是一个{tags}的小朋友。在游戏时间，{gender}总是能和小伙伴们分享玩具；在午餐时，{gender}会认真地吃完自己的饭菜。{name}的每一点进步，老师都看在眼里，期待{gender}继续成长！"
  }
]
```

### 2. 小学阶段配置

```json
"primary": [
  {
    "style": "dragon-horse",
    "name": "龙马精神",
    "description": "引用'一马当先'、'龙马精神'等成语，充满能量地给予评语。",
    "template": "{name}是一个{tags}的学生，展现出龙马精神的风采。{gender}在学习上一马当先，在班级活动中勇于承担责任。希望{name}继续策马扬鞭，在知识的海洋中奋勇前行！"
  },
  {
    "style": "enthusiastic",
    "name": "热情鼓励",
    "description": "阳光积极，多用感叹句，侧重挖掘优点和自信心。",
    "template": "{name}真是一个{tags}的好学生！{gender}的表现总是让老师眼前一亮！在课堂上积极发言，在作业中认真细致，{name}你太棒了！继续保持这份热情，你一定能创造更多精彩！"
  },
  {
    "style": "poetic",
    "name": "诗意文采",
    "description": "引用恰当的古诗文或名言，评语内容优美典雅。",
    "template": "{name}是一个{tags}的学生，正如'腹有诗书气自华'所言，{gender}在学习中展现出独特的气质。希望{name}能够'读万卷书，行万里路'，在知识的海洋中乘风破浪，书写属于自己的精彩篇章。"
  }
]
```

### 3. 初中阶段配置

```json
"middle": [
  {
    "style": "galloping",
    "name": "策马扬鞭",
    "description": "引用'以梦为马'意象，鼓励学生在青春旷野全力奔跑。",
    "template": "{name}是一个{tags}的学生，正处在人生最美好的年华。愿{gender}以梦为马，不负韶华，在青春的旷野上全力奔跑。{name}，未来的道路还很长，希望你能够坚定信念，勇往直前！"
  },
  {
    "style": "friendly-mentor",
    "name": "亦师亦友",
    "description": "平等对话，尊重个性，像朋友一样真诚交流。",
    "template": "{name}，你是一个{tags}的同学。作为老师，我很欣赏{gender}的个性和想法。我们一起走过了这段时光，看到了{name}的成长和进步。希望未来的日子里，你能继续做真实的自己，绽放属于你的光彩。"
  },
  {
    "style": "rigorous",
    "name": "严谨治学",
    "description": "干练客观，侧重评价学习态度和思维能力，直击要害。",
    "template": "{name}在本学期展现出{tags}的特质。{gender}的学习态度端正，思维能力较强，能够独立思考问题。建议{name}在今后的学习中进一步提升自我管理能力，注重知识的系统性和深度，为未来的发展打下坚实基础。"
  }
]
```

### 4. 默认提示词

```json
"default": {
  "template": "{name}是一个{tags}的学生。{gender}在学习和生活中都有不错的表现。希望{name}能够继续努力，取得更大的进步！"
}
```

当找不到匹配的风格时，系统会使用此默认提示词。

## 🚀 调试方法

### 1. 使用测试页面

我已创建了测试页面：`test-prompt-loading.html`

**使用方法**：
```bash
open test-prompt-loading.html
```

**功能**：
- 显示当前所有提示词配置
- 验证变量使用
- 实时预览配置效果

### 2. 浏览器控制台

打开浏览器开发者工具（F12），查看控制台输出：
- ✅ `[Prompts] 提示词配置加载成功` - 成功加载
- ❌ 错误信息 - 加载失败

### 3. 手动测试

1. 刷新浏览器页面
2. 打开应用程序
3. 输入学生信息并选择不同风格
4. 点击"生成评语"
5. 验证生成的评语是否符合预期

## 💡 提示词优化建议

### 1. 保持变量使用一致性

确保所有模板中都正确使用支持的变量：

```javascript
// 正确
"{name}是一个{tags}的学生。{gender}学习很认真。"

// 错误（使用了未支持的变量）
"{姓名}是一个{标签}的学生。{他/她}学习很认真。"
```

### 2. 注意语言风格

- **幼儿园**：语言简单、亲切、充满童趣
- **小学**：语言生动、积极、充满鼓励
- **初中**：语言严谨、客观、富有哲理

### 3. 避免重复内容

每个风格的模板应该有明显的区别，体现不同的评语策略。

### 4. 控制长度

建议每个模板生成的评语长度在 150-300 字之间，过长会影响阅读体验。

## 🔄 版本控制

### 1. 备份配置

在修改前备份配置文件：
```bash
cp public/prompts.json public/prompts.json.backup-$(date +%Y%m%d)
```

### 2. 查看历史版本

```bash
ls public/prompts.json.backup-*
```

### 3. 恢复配置

```bash
cp public/prompts.json.backup-20260120 public/prompts.json
```

## 🐛 常见问题

### 1. 配置不生效

- 检查 `public/prompts.json` 文件是否正确保存
- 确认没有语法错误
- 刷新浏览器（强制刷新：Ctrl+F5）

### 2. 提示词不完整

- 检查是否有未闭合的引号或括号
- 确认模板字符串没有换行问题

### 3. 变量不替换

- 确认使用了正确的变量名：`{name}`, `{tags}`, `{gender}`
- 检查变量名是否有拼写错误

### 4. JSON 语法错误

使用在线工具验证 JSON 格式：
- [JSONLint](https://jsonlint.com/)
- VS Code 内置验证功能

## 📞 技术支持

如果在配置过程中遇到问题，可以：

1. 查看浏览器控制台的错误信息
2. 使用 `test-prompt-loading.html` 进行测试
3. 检查 `public/prompts.json` 语法
4. 联系开发人员

## 📖 参考资料

- [JSON 格式规范](https://www.json.org/)
- [Vue 3 开发文档](https://vuejs.org/)
- [智能评语系统开发文档](README.md)

---

**最后更新**：2026年01月21日
**版本**：2.0.1
**作者**：智能评语系统开发团队
