#!/bin/bash

echo "======================================"
echo "  ç¿æžæˆç»©åˆ†æžç³»ç»Ÿ - ç½‘é¡µç‰ˆæ‰“åŒ…"
echo "======================================"
echo ""

# è®¾ç½®å˜é‡
TODAY=$(date +%Y%m%d)
DEST_FOLDER="$HOME/Desktop/ç¿æžæˆç»©åˆ†æžç³»ç»Ÿ_ç½‘é¡µç‰ˆ_$TODAY"
PROJECT_DIR="/Users/lijiahao/Desktop/project/grade-analysis-system"

# 1. æž„å»ºé¡¹ç›®
echo "ðŸ“¦ æ­¥éª¤1/4: æ­£åœ¨æž„å»ºWebåº”ç”¨..."
cd "$PROJECT_DIR"
npm run build

if [ ! -f "dist/index.html" ]; then
    echo "âŒ æž„å»ºå¤±è´¥ï¼è¯·æ£€æŸ¥é”™è¯¯ä¿¡æ¯"
    exit 1
fi

echo "âœ… æž„å»ºå®Œæˆ"
echo ""

# 2. åˆ›å»ºç›®æ ‡æ–‡ä»¶å¤¹
echo "ðŸ“ æ­¥éª¤2/4: æ­£åœ¨å‡†å¤‡æ–‡ä»¶..."
mkdir -p "$DEST_FOLDER"

# 3. å¤åˆ¶æ–‡ä»¶
cp dist/index.html "$DEST_FOLDER/index.html"
cp æ™ºèƒ½å¯åŠ¨.bat "$DEST_FOLDER/"
cp æ™ºèƒ½å¯åŠ¨.command "$DEST_FOLDER/"
cp å¯åŠ¨ç¨‹åº_æœåŠ¡å™¨.bat "$DEST_FOLDER/"
cp å¯åŠ¨ç¨‹åº_æœåŠ¡å™¨.command "$DEST_FOLDER/"
chmod +x "$DEST_FOLDER/æ™ºèƒ½å¯åŠ¨.command"
chmod +x "$DEST_FOLDER/å¯åŠ¨ç¨‹åº_æœåŠ¡å™¨.command"

# åˆ›å»ºå¿«é€Ÿå¼€å§‹æ–‡ä»¶
cat > "$DEST_FOLDER/å¿«é€Ÿå¼€å§‹.txt" << 'EOF'
====================================
  ç¿æžæˆç»©åˆ†æžç³»ç»Ÿ - å¿«é€Ÿå¼€å§‹
====================================

ã€æœ€ç®€å•æ–¹æ³•ï¼šæ™ºèƒ½å¯åŠ¨ï¼ˆå¼ºçƒˆæŽ¨èï¼‰â­â­â­ã€‘

Windowsç”¨æˆ·ï¼š
  åŒå‡»"æ™ºèƒ½å¯åŠ¨.bat"

Macç”¨æˆ·ï¼š
  åŒå‡»"æ™ºèƒ½å¯åŠ¨.command"

âœ“ è‡ªåŠ¨æŸ¥æ‰¾å¯ç”¨ç«¯å£ï¼Œé¿å…å†²çª
âœ“ è‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨
âœ“ æ•°æ®100%å®‰å…¨å¯é 
âœ“ Macè‡ªå¸¦Pythonï¼Œæ— éœ€å®‰è£…
âœ“ Windowséœ€è¦Pythonï¼ˆå¦‚æœªå®‰è£…ä¼šæç¤ºï¼‰

====================================

ã€å¤‡ç”¨æ–¹æ³•ï¼šæ ‡å‡†æœåŠ¡å™¨å¯åŠ¨ã€‘

å¦‚æžœæ™ºèƒ½å¯åŠ¨é‡åˆ°é—®é¢˜ï¼Œå¯ä½¿ç”¨ï¼š

Windowsç”¨æˆ·ï¼š
  åŒå‡»"å¯åŠ¨ç¨‹åº_æœåŠ¡å™¨.bat"

Macç”¨æˆ·ï¼š
  åŒå‡»"å¯åŠ¨ç¨‹åº_æœåŠ¡å™¨.command"

====================================

ã€é¦–æ¬¡ä½¿ç”¨æ­¥éª¤ã€‘

1. ç‚¹å‡»"é…ç½®ç§‘ç›®å¹¶ä¸‹è½½æ¨¡æ¿"
2. åœ¨Excelä¸­å¡«å†™å­¦ç”Ÿæˆç»©
3. ä¸Šä¼ å¡«å¥½çš„æˆç»©è¡¨
4. æŸ¥çœ‹è‡ªåŠ¨ç”Ÿæˆçš„åˆ†æžæŠ¥å‘Š

====================================

ã€é‡è¦æç¤ºã€‘âš ï¸

âœ“ æŽ¨èä½¿ç”¨æœåŠ¡å™¨æ–¹å¼å¯åŠ¨ï¼ˆæ•°æ®æ›´å®‰å…¨ï¼‰
âœ“ å»ºè®®å®šæœŸå¤åˆ¶æ•´ä¸ªæ–‡ä»¶å¤¹å¤‡ä»½
âœ“ ä¸åŒæµè§ˆå™¨çš„æ•°æ®æ˜¯ç‹¬ç«‹çš„
âœ“ å…³é—­æœåŠ¡å™¨çª—å£ä¼šåœæ­¢è¿è¡Œ

====================================

ã€å¸¸è§é—®é¢˜ã€‘

Q: Windowsæç¤º"æœªå®‰è£…Python"æ€Žä¹ˆåŠžï¼Ÿ
A: è®¿é—® https://www.python.org/downloads/
   ä¸‹è½½å®‰è£…ï¼Œå®‰è£…æ—¶å‹¾é€‰"Add Python to PATH"

Q: MacåŒå‡».commandæ–‡ä»¶æ²¡ååº”ï¼Ÿ
A: å³é”®æ–‡ä»¶ â†’ æ‰“å¼€ â†’ ç¡®è®¤æ‰“å¼€

Q: ä¸ºä»€ä¹ˆæ•°æ®ä¼šä¸¢å¤±ï¼Ÿ
A: ä½¿ç”¨æœåŠ¡å™¨æ–¹å¼å¯åŠ¨å¯é¿å…æ­¤é—®é¢˜
   æˆ–å®šæœŸå¤‡ä»½æ•´ä¸ªæ–‡ä»¶å¤¹

Q: å¯ä»¥åœ¨å¤šå°ç”µè„‘ä¸Šä½¿ç”¨å—ï¼Ÿ
A: å¯ä»¥ï¼å¤åˆ¶æ•´ä¸ªæ–‡ä»¶å¤¹åˆ°Uç›˜å³å¯

====================================

ã€æŠ€æœ¯æ”¯æŒã€‘

å¦‚æœ‰é—®é¢˜ï¼Œè¯·è”ç³»ï¼š
ðŸ“§ é‚®ç®±ï¼šsupport@example.com
ðŸ“± å¾®ä¿¡ï¼šyour-wechat-id
â° å·¥ä½œæ—¶é—´ï¼šå‘¨ä¸€è‡³å‘¨äº” 9:00-18:00

ç¥æ‚¨ä½¿ç”¨æ„‰å¿«ï¼ðŸŽ‰
EOF

echo "âœ… æ–‡ä»¶å‡†å¤‡å®Œæˆ"
echo ""

# 4. åˆ›å»ºåŽ‹ç¼©åŒ…
echo "ðŸ“¦ æ­¥éª¤3/4: æ­£åœ¨åˆ›å»ºåŽ‹ç¼©åŒ…..."
cd "$HOME/Desktop"
zip -q -r "ç¿æžæˆç»©åˆ†æžç³»ç»Ÿ_ç½‘é¡µç‰ˆ_$TODAY.zip" "ç¿æžæˆç»©åˆ†æžç³»ç»Ÿ_ç½‘é¡µç‰ˆ_$TODAY"

echo "âœ… åŽ‹ç¼©åŒ…åˆ›å»ºå®Œæˆ"
echo ""

# 5. æ˜¾ç¤ºç»“æžœ
echo "======================================"
echo "âœ… æ‰“åŒ…å®Œæˆï¼"
echo "======================================"
echo ""
echo "ðŸ“ æ–‡ä»¶å¤¹ä½ç½®ï¼š"
echo "   $DEST_FOLDER"
echo ""
echo "ðŸ“¦ åŽ‹ç¼©åŒ…ä½ç½®ï¼š"
echo "   $HOME/Desktop/ç¿æžæˆç»©åˆ†æžç³»ç»Ÿ_ç½‘é¡µç‰ˆ_$TODAY.zip"
echo ""
echo "ðŸ“Š æ–‡ä»¶åˆ—è¡¨ï¼š"
ls -lh "$DEST_FOLDER"
echo ""
echo "ðŸ’¡ ä¸‹ä¸€æ­¥ï¼š"
echo "1. æµ‹è¯•ï¼šæ‰“å¼€æ–‡ä»¶å¤¹ï¼ŒåŒå‡»å¯åŠ¨ç¨‹åºæµ‹è¯•"
echo "2. åˆ†äº«ï¼šå°†åŽ‹ç¼©åŒ…å‘é€ç»™è€å¸ˆ"
echo "3. è¯´æ˜Žï¼šæé†’è€å¸ˆæŸ¥çœ‹\"å¿«é€Ÿå¼€å§‹.txt\""
echo ""

# è¯¢é—®æ˜¯å¦æ‰“å¼€æ–‡ä»¶å¤¹
read -p "æ˜¯å¦çŽ°åœ¨æ‰“å¼€æ–‡ä»¶å¤¹æŸ¥çœ‹ï¼Ÿ(y/n): " choice
if [ "$choice" = "y" ] || [ "$choice" = "Y" ]; then
    open "$DEST_FOLDER"
fi

echo ""
echo "ðŸŽ‰ ç¥æ‚¨é”€å”®é¡ºåˆ©ï¼"
