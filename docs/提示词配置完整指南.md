# 提示词配置完整指南

## 📌 目录

1. [配置文件位置](#配置文件位置)
2. [提示词列表](#提示词列表)
3. [修改提示词（3种方法）](#修改提示词)
4. [提示词编写最佳实践](#提示词编写最佳实践)
5. [常见问题排查](#常见问题排查)
6. [版本管理建议](#版本管理建议)

---

## 📁 配置文件位置

### 方式一：JSON配置文件（推荐）

```
src/config/prompts.json
```

**特点**：
- ✅ 纯文本格式，任何编辑器都能打开
- ✅ 非技术人员也能修改
- ✅ 修改后刷新即可生效（开发模式）

### 方式二：备份文件

```
src/config/prompts.default.json
```

**用途**：默认提示词备份，修改出错时可以恢复

---

## 📋 提示词列表

### 幼儿园阶段（3种风格）

| 风格ID | 风格名称 | 说明 |
|--------|----------|------|
| `lively-horse` | 活泼小马 | 结合2026马年元素，把孩子比作可爱的'小马驹'，活泼充满童趣 |
| `warm-gentle` | 亲切温柔 | 像妈妈一样的口吻，语气柔和，充满爱意和包容 |
| `detail-narrative` | 细节叙事 | 侧重描述生活细节和具体画面，不会空洞地表扬 |

### 小学阶段（3种风格）

| 风格ID | 风格名称 | 说明 |
|--------|----------|------|
| `dragon-horse` | 龙马精神 | 引用'一马当先'、'龙马精神'等成语，充满能量地给予评语 |
| `enthusiastic` | 热情鼓励 | 阳光积极，多用感叹句，侧重挖掘优点和自信心 |
| `poetic` | 诗意文采 | 引用恰当的古诗文或名言，评语内容优美典雅 |

### 初中阶段（3种风格）

| 风格ID | 风格名称 | 说明 |
|--------|----------|------|
| `galloping` | 策马扬鞭 | 引用'以梦为马'意象，鼓励学生在青春旷野全力奔跑 |
| `friendly-mentor` | 亦师亦友 | 平等对话，尊重个性，像与学生一样真诚交流 |
| `rigorous` | 严谨治学 | 干练客观，侧重评价学习态度和思维能力，直击要害 |

---

## 🔧 修改提示词

### 方法一：使用文本编辑器修改（适合技术人员）

#### 步骤1：打开配置文件

**Mac系统**：
```bash
open -a "TextEdit" "src/config/prompts.json"
```

**Windows系统**：
右键点击 `prompts.json` → 选择"打开方式" → 记事本

#### 步骤2：编辑提示词模板

找到要修改的风格，编辑 `template` 字段：

```json
{
  "style": "lively-horse",
  "name": "活泼小马",
  "description": "结合2026马年元素...",
  "template": "这里是提示词内容，支持以下变量：\n{name} - 学生姓名\n{tags} - 学生标签\n{gender} - 他/她"
}
```

**可用变量**：
- `{name}` - 学生姓名（如：张三）
- `{tags}` - 学生标签（自动用顿号连接，如：活泼、善良、好学）
- `{gender}` - 性别代词（他/她）

#### 步骤3：保存文件

- **Mac**: 按 `Cmd + S`
- **Windows**: 按 `Ctrl + S`

#### 步骤4：查看效果

- **开发模式**：刷新浏览器即可
- **生产环境**：重启应用

---

### 方法二：使用应用内编辑器（方案2专属）

如果选择了方案2（内置可视化编辑器），操作更简单：

#### 步骤1：打开提示词管理

点击应用左上角 **设置图标** → 选择 **"提示词管理"**

#### 步骤2：选择要修改的风格

- 选择学段（幼儿园/小学/初中）
- 选择风格（如：活泼小马）

#### 步骤3：编辑提示词

在编辑器中修改内容，右侧会实时预览效果

#### 步骤4：保存

点击 **"保存修改"** 按钮，立即生效

---

### 方法三：客服远程协助修改

如果您不熟悉操作，可以联系客服：

1. 将需要修改的提示词内容发送给客服
2. 客服修改配置文件后发送给您
3. 您将新文件替换到 `src/config/prompts.json`
4. 重启应用即可

---

## 💡 提示词编写最佳实践

### 原则1：具体化，避免空洞

❌ **不好的示例**：
```
{name}是一个很棒的孩子，{gender}表现很好，继续加油！
```

✅ **好的示例**：
```
{name}是一个{tags}的孩子。记得有一次，{gender}在手工课上认真地制作了一个漂亮的卡片，送给了生病的小朋友，让大家都很感动。
```

**为什么**：具体的细节让评语更生动，更有说服力。

---

### 原则2：合理使用变量

确保提示词中包含所有三个变量：

```json
{
  "template": "{name}是一个{tags}的孩子。{gender}在学习上..."
}
```

**变量使用建议**：
- `{name}` 至少出现 2 次（开头和结尾）
- `{tags}` 必须出现 1 次
- `{gender}` 根据需要使用 2-3 次

---

### 原则3：保持风格一致性

每种风格都有独特的语言特点，修改时要保持：

**活泼小马风格**：
- ✅ 使用"小马驹"、"奔跑"、"活力"等词汇
- ✅ 语气轻快活泼
- ❌ 不要使用严肃正式的词汇

**严谨治学风格**：
- ✅ 使用"严谨"、"扎实"、"逻辑"等词汇
- ✅ 语气客观理性
- ❌ 不要使用过于感性的表达

---

### 原则4：字数控制

建议每条评语控制在 **100-150字**：

- 太短（<80字）：显得敷衍
- 太长（>180字）：阅读疲劳

**检查字数**：
复制模板到Word，查看字数统计。

---

### 原则5：适当使用修辞手法

根据风格特点使用修辞：

**比喻**：
```
{name}就像一匹活泼可爱的小马驹...
{name}就像春天里的花朵一样绽放...
```

**排比**：
```
{gender}在学习上刻苦努力，在生活中乐于助人，在活动中积极参与。
```

**引用**（诗意文采风格专属）：
```
{name}以梦为马，不负韶华...
```

---

## 🐛 常见问题排查

### 问题1：修改后没有生效

**原因**：
- 文件没有保存
- 生产环境需要重启应用

**解决方案**：
1. 确认文件已保存（Mac: Cmd+S，Windows: Ctrl+S）
2. 开发模式：刷新浏览器（F5 或 Cmd+R）
3. 生产环境：完全关闭应用后重新打开

---

### 问题2：生成的评语格式错乱

**原因**：
- JSON 格式错误（缺少引号、逗号等）

**解决方案**：
1. 使用 JSON 验证工具检查格式：https://jsonlint.com
2. 复制配置文件内容，粘贴到验证工具
3. 根据提示修复错误

**常见错误**：
```json
// ❌ 错误：缺少逗号
{
  "style": "lively-horse"
  "template": "..."
}

// ✅ 正确：添加逗号
{
  "style": "lively-horse",
  "template": "..."
}
```

---

### 问题3：变量没有被替换

**原因**：
- 变量名拼写错误
- 使用了不支持的变量

**解决方案**：
确保只使用这三个变量，且拼写正确：
- `{name}` （不是 `{Name}` 或 `{student}`）
- `{tags}` （不是 `{tag}` 或 `{labels}`）
- `{gender}` （不是 `{sex}` 或 `{他/她}`）

---

### 问题4：评语内容太长或太短

**原因**：
- 提示词模板长度不合适

**解决方案**：
1. 检查模板字数（建议 100-150字）
2. 太长：精简描述，去掉冗余词汇
3. 太短：添加具体细节或感受

---

### 问题5：AI 生成的评语偏离模板

**原因**：
- 模板指导性不够强
- DeepSeek API 理解偏差

**解决方案**：
1. 在模板中添加更多具体细节
2. 使用更明确的指令性语言
3. 联系客服调整服务器端的 API 参数

---

## 🔄 版本管理建议

### 修改前备份

**方法1：手动备份**
```bash
# 复制配置文件并添加日期后缀
cp src/config/prompts.json src/config/prompts.backup-20260120.json
```

**方法2：使用默认备份**
```bash
# 恢复到系统默认配置
cp src/config/prompts.default.json src/config/prompts.json
```

---

### 查看所有备份

```bash
# 列出所有备份文件
ls src/config/prompts.backup-*

# 输出示例：
# prompts.backup-20260120.json
# prompts.backup-20260115.json
```

---

### 恢复到指定版本

```bash
# 恢复到 2026年1月20日 的版本
cp src/config/prompts.backup-20260120.json src/config/prompts.json
```

---

## 📞 技术支持

### 遇到问题时的检查清单

- [ ] 配置文件格式是否正确（JSON验证）
- [ ] 变量名是否拼写正确
- [ ] 文件是否已保存
- [ ] 应用是否已重启
- [ ] 是否有备份可以恢复

### 联系客服

如果以上方法无法解决问题，请联系客服并提供：

1. 错误截图
2. 当前配置文件内容
3. 期望实现的效果

---

## 🎉 快速开始

**最简单的修改流程（5步）**：

1. 📂 打开 `src/config/prompts.json`
2. 🔍 找到想修改的风格（如 `lively-horse`）
3. ✏️ 编辑 `template` 内容
4. 💾 保存文件（Cmd+S 或 Ctrl+S）
5. 🔄 刷新应用查看效果

**就是这么简单！**

---

## 附录：完整配置文件示例

```json
{
  "kindergarten": [
    {
      "style": "lively-horse",
      "name": "活泼小马",
      "description": "结合2026马年元素，把孩子比作可爱的'小马驹'",
      "template": "{name}是一个{tags}的孩子，就像一匹活泼可爱的小马驹。{gender}在幼儿园里总是充满活力，和小伙伴们相处得很愉快。希望{name}继续保持这份活力，快乐成长！"
    }
  ],
  "primary": [...],
  "middle": [...]
}
```

**字段说明**：
- `style`: 风格ID（不要修改）
- `name`: 风格名称（显示在下拉菜单中）
- `description`: 风格说明（帮助用户选择）
- `template`: 提示词模板（这是您需要修改的部分）

---

**文档版本**：v1.0
**最后更新**：2026-01-20
**适用系统**：智能评语系统 v2.0
